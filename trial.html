<html>
  <head>
    <title>Find the Butterfly</title>
    <link href="trial.css" rel="stylesheet">
    <script src="photos.js"></script>
    <script src="trial-params.js"></script>
    <script src="logger.js"></script>
    <script src="user.js"></script>
    <script src="trial.js"></script>
    <script src="mfb.js"></script>
    <script src="ROI.js"></script>
    <script src="setup.js"></script>
    <script src="papaparse.min.js"></script>
  </head>
  <body id="trial">

    <div id="watermark" style="display:none">
      <div class="text">DEBUG ONLY</div>
    </div>

    <div class="imgbox" >
      <div class="holder">
        <canvas id="photo" class="photo" width="500" height="333">
      </div>

      <div class="controlpanel">
        <div id="barborder"><span id="bar">&nbsp;</span></div>

        <div class="progress" id="progress">
        </div>
      </div>
    </div>

    <!-- ==================================================================== -->
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/5.11.1/firebase-app.js"></script>
    <!-- <script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-auth.js"></script> -->
    <script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-database.js"></script>
    <script>
      function StartTrial() {
          // is this for debugging only (i.e. not real data)?
          let debug = IsDebugging();
          debug = true;
          // Is this the user's first attempt?
          const noob = GetUrlParam("noob") == "T";

          // Get the data logger
          var logger = ChooseLogger(debug);

          // Log the session
          logger.logUserSession(noob, window.screen.width, window.screen.height, window.devicePixelRatio, navigator.userAgent);

          // Create the progress indicators
          CreateProgressIndicators(numPhotos);
          
          // Setup the photos to be displayed. 
          // Candidate photos are defined in a CSV file
          const animationDuration = 500;
          PrepareAndStartTrial(logger, numPhotos, PHOTOS_INFO_URL, "photo", escapeTimeout, animationDuration);
      }
      
      window.onload = StartTrial;

    </script>
    <!-- ==================================================================== -->
    
  </body>
</html>
